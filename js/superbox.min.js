(function(c,d){var b="SuperBox",a="2.1.1";c.fn.SuperBox=function(p){var h=c.extend({background:null,border:null,height:400,view:"landscape",xColor:null,xShadow:"none"},p);var g,f,n=c('<div class="superbox-show superbox-X"/>'),m=c('<img src="img/ajax-loader.gif" class="superbox-current-img"/>'),e=c('<a href="#" class="superbox-close"><i class="icon-cancel-circle"></i></a>'),j=c('<div class="superbox-float"/>'),k=this.find(">div");var o=(function(q){if(q==="set"){c("html").css("height",c("html").outerHeight(true))}else{if(q=="unset"){c("html").css("height","")}}});var l=(function(r){var q=r.next(".superbox-O");q.removeClass("superbox-O").addClass("superbox-X");if(g!=f){q.find("img.superbox-current-img, a.superbox-close").animate({opacity:0},100).end().slideUp(function(){f=0;g=0;o("unset")})}else{o("set");q.find("img.superbox-current-img").animate({opacity:0},100).end().hide()}});var i=(function(t,q){var s=t.next();s.find("img.superbox-current-img").attr("src",q);var u=(function(){if(c(window).width()>1024){if(s.outerWidth(true)!=t.width()*8){s.outerWidth(t.width()*8)}}else{if(c(window).width()>767){if(s.outerWidth(true)!=t.width()*6){s.outerWidth(t.width()*6)}}else{if(c(window).width()>485){if(s.outerWidth(true)!=t.width()*4){s.outerWidth(t.width()*4)}}else{if(s.outerWidth(true)!=t.width()*2){s.outerWidth(t.width()*2)}}}}});var r=(function(){var A=s.outerWidth(true),z=h.height+(16*3),v=z,w=c(window).height()*0.8,y=h.view,x=0.6667;if(v>w){v=w}if(y==="landscape"){if(A<v/x){v=A*x}}if(y==="portrait"){if(A<v*x){v=A/x}}if(y==="square"){if(A<v){v=A}}s.outerHeight(v)});u();r();c(window).resize(function(){u();r()});s.removeClass("superbox-X").addClass("superbox-O");if(g!=f){s.slideDown(function(){f=c(this).offset().top;c("html,body").animate({scrollTop:f-((c(window).height()-c(this).outerHeight(true))/2)},"fast");g=c(this).prev().find("img").offset().top+c(this).prev().find("img").height()}).find("a.superbox-close").animate({opacity:0.7},1000)}else{s.show().find("a.superbox-close").css("opacity","0.7");o("unset")}s.find("img.superbox-current-img").animate({opacity:1},1000)});this.addClass("superbox-active");k.addClass("superbox-list");n.append(m).append(e).insertAfter(k);j.appendTo(this);if(h.background!==null){k.next().css({"background-color":h.background})}if(h.border!==null){k.next().find("img.superbox-current-img").css({"border-color":h.border})}if(h.xColor!==null){k.next().find("a.superbox-close").css({color:h.xColor})}if(h.xShadow=="emboss"){k.next().find("a.superbox-close").css({"text-shadow":"0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)"})}else{if(h.xShadow=="embed"){k.next().find("a.superbox-close").css({"text-shadow":"0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)"})}}k.each(function(){c(this).on("click",function(){var q=c(this).find("img").data("img");g=c(this).find("img").offset().top+c(this).find("img").height();if(!c(this).next(".superbox-O").length){l(k)}if(c(this).next(".superbox-O").length){g=0;l(c(this))}else{i(c(this),q)}})});c(".superbox-close").on("click",function(q){q.preventDefault();g=0;l(c(this).parent().prev())});return this}})(jQuery);