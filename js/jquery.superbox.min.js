(function(c,d){var b="SuperBox",a="3.1.1";c.fn.SuperBox=function(f){var m=c.extend({background:null,border:null,height:400,view:"landscape",xColor:null,xShadow:"none"},f);var j=false,g=false,w=c('<div class="superbox-show"/>'),x=c('<img src="img/ajax-loader.gif" class="superbox-current-img"/>'),y=c('<a href="#" class="superbox-close"><i class="icon-remove-sign"></i></a>'),l=c('<a href="#" class="superbox-prev"><i class="icon-circle-arrow-left"></i></a>'),n=c('<a href="#" class="superbox-next"><i class="icon-circle-arrow-right"></i></a>'),h=c('<div class="superbox-float"/>'),v=this.find(">div"),q=this.find(">div:nth-child(8n)"),r=this.find(">div:nth-child(6n)"),t=this.find(">div:nth-child(4n)"),u=this.find(">div:nth-child(2n)"),e=this;var o=function(z){var A=function(C){var E,F="superbox-"+C,B=["superbox-last","superbox-8","superbox-6","superbox-4","superbox-2"];if(C===8){E=q}else{if(C===6){E=r}else{if(C===4){E=t}else{if(C===2){E=u}}}}for(var D=B.length-1;D>=0;D--){v.removeClass(B[D])}v.addClass(F);E.add(v.last()).addClass("superbox-last");if(e.find(".superbox-show").outerWidth(true)!=v.width()*C){e.find(".superbox-show").outerWidth(v.width()*C)}};if(e.width()>1024){A(8)}else{if(e.width()>767){A(6)}else{if(e.width()>320){A(4)}else{A(2)}}}};var i=(function(){var E=e.find(".superbox-show").outerWidth(true),D=m.height+(16*3),z=D,A=c(window).height()*0.8,C=m.view,B=0.6667;if(z>A){z=A}if((C==="landscape")&&(E<z/B)){z=E*B}if((C==="portrait")&&(E<z*B)){z=E/B}if((C==="square")&&(E<z)){z=E}e.find(".superbox-show").outerHeight(z)});var k=function(E){var A=!e.find(".superbox-show").length,z=E.hasClass("superbox-O"),M=!E.hasClass("superbox-last"),P=!E.nextAll(".superbox-last:first").next(".superbox-show").length,I=!E.next(".superbox-show").length,N=function(Q){if(Q==="A"){w.append(x).append(y).append(l).append(n).insertAfter(E.nextAll(".superbox-last:first"))}else{w.append(x).append(y).insertAfter(E)}i();o();F();e.find(".superbox-show").slideDown("slow",function(){L();K(true);G(true);if(g===false){e.find(".superbox-prev,.superbox-next").on("click",function(R){C(c(this),R);g=true});c(document.documentElement).keyup(function(R){if(J()===true){C(c(this),R);g=true}})}})},F=function(){e.find(".superbox-show img.superbox-current-img").attr("src",E.find("img").data("img"));B()},B=function(){var R=new Image(),Q=new Image();R.src=E.prev(".superbox-list").find("img").data("img");Q.src=E.nextAll(".superbox-list:first").find("img").data("img")},L=function(){c("html, body").animate({scrollTop:e.find(".superbox-show").offset().top-E.width()},"medium")},J=function(){var T=c(window).scrollTop();var S=T+c(window).height();var Q=e.find(".superbox-show").offset().top;var R=Q+e.find(".superbox-show").height();return((R<=S)&&(Q>=T))},K=function(Q){if(Q===true){v.removeClass("superbox-O");E.addClass("superbox-O")}else{v.removeClass("superbox-O")}},G=function(Q){if(Q===true){e.find(".superbox-show img.superbox-current-img").animate({opacity:1},750);if(j===false){O(true)}}else{e.find(".superbox-show img.superbox-current-img").animate({opacity:0},100,function(){F()})}},O=function(Q){if(Q===true){j=true;e.find(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0.7},750)}else{j=false;e.find(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0},100)}},C=function(R,S){S.preventDefault();var T=null,Q=null;if(S.keyCode==37||R.hasClass("superbox-prev")){T="prev";Q=".superbox-list"}else{if(S.keyCode==39||R.hasClass("superbox-next")){T="nextAll";Q=".superbox-list:first"}}if(T!==null){e.find(".superbox-O")[T](Q).click()}},H=function(){G(false);G(true);K(true)},D=function(){var Q=function(){G(false);O(false);e.find(".superbox-show").slideUp(function(){c(this).remove();K(false);g=false})};e.find(".superbox-close").on("click",function(R){R.preventDefault();Q()});if(z===true){Q()}};if(z===false){if(M===true&&P===true){if(A===true){N("A")}else{G(false);O(false);e.find(".superbox-show").slideUp(function(){N("A")})}}else{if(M===false&&I===true){if(A===true){N("B")}else{G(false);O(false);e.find(".superbox-show").slideUp(function(){N("B")})}}else{H()}}}D()};var s=function(){c(window).resize(function(){if(e.find(".superbox-O").hasClass("superbox-last")){e.find(".superbox-show").insertAfter(e.find(".superbox-O"))}else{e.find(".superbox-show").insertAfter(e.find(".superbox-O").nextAll(".superbox-last:first"))}})};var p=function(){if(m.background!==null){e.find(".superbox-show").css("background-color",m.background)}if(m.border!==null){e.find(".superbox-show img.superbox-current-img").css("border-color",m.border)}if(m.xColor!==null){e.find(".superbox-close, .superbox-prev, .superbox-next").css("color",m.xColor)}if(m.xShadow=="emboss"){e.find(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)")}else{if(m.xShadow=="embed"){e.find(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)")}}};this.addClass("superbox-active");v.addClass("superbox-list");o();c(window).resize(function(){i();o()});h.appendTo(this);v.on("mouseenter",function(){var z=new Image(),A=c(this).find("img").data("img");c(z).attr("src",A)});v.on("click",function(){k(c(this));p()});s();return this}})(jQuery);